<div class="content-heading">
  <div>Users
    <small>Create or search new user</small></div>
</div>
<div class="container-fluid">
  <div class="row">
    <div class="col-lg-12">
      <form [formGroup]="valForm" class="form-validate form-horizontal" (submit)="submitForm($event, valForm.value)"
        novalidate="" autocomplete="off">
        <!-- START card-->
        <div class="card card-default">
          <div class="card-body">
            <div class="form-group row">
              <label class="col-xl-2 col-form-label">Username</label>
              <div class="col-xl-10 form-inline">
                <input class="form-control" type="text" formControlName="username" placeholder="username"
                  [formControl]="valForm.controls['username']" [ngClass]="{ 'is-invalid': valForm.controls['username'].hasError('required') && (valForm.controls['username'].dirty || valForm.controls['username'].touched) }" />
                <button type="button" class="btn btn-outline-inverse" (click)="search(valForm.value.username)" [disabled]="valForm.controls['username'].hasError('required')"><span
                    class="fa fa-search"></span>
                  Search</button>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-xl-2 col-form-label">First Name</label>
              <div class="col-xl-10">
                <input class="form-control" type="text" formControlName="firstname"
                [formControl]="valForm.controls['firstname']" [ngClass]="{ 'is-invalid': valForm.controls['firstname'].hasError('required') }" />
              <span class="text-danger"
                *ngIf="valForm.controls['firstname'].hasError('required') && (valForm.controls['firstname'].dirty || valForm.controls['firstname'].touched)">First Name
                is required</span>
              </div>
           </div>
           <div class="form-group row">
                <label class="col-xl-2 col-form-label">Middle Name</label>
                <div class="col-xl-10">
                  <input class="form-control" type="text" formControlName="lastname"
                  [formControl]="valForm.controls['lastname']" [ngClass]="{ 'is-invalid': valForm.controls['lastname'].hasError('required') }"/>
                
                </div>
            </div>
            <div class="form-group row">
              <label class="col-xl-2 col-form-label">Surname</label>
              <div class="col-xl-10">
                <input class="form-control" type="text" formControlName="surname"
                [formControl]="valForm.controls['surname']" />
              </div>
           </div>
           <div class="form-group row">
                <label class="col-xl-2 col-form-label">Email Address</label>
                <div class="col-xl-10">
                  <input class="form-control" type="text" formControlName="email" [formControl]="valForm.controls['email']" [ngClass]="{ 'is-invalid': valForm.controls['email'].hasError('required') }"/>
                  <span class="text-danger"
                  *ngIf="valForm.controls['email'].hasError('required') && (valForm.controls['email'].dirty || valForm.controls['email'].touched)">branch
                  is required</span>
                </div>
            </div>
            <div class="form-group row">
              <label class="col-xl-2 col-form-label">Create Date</label>
              <div class="col-xl-10 input-group">
                <input type="text" class="form-control" #dp1="bsDatepicker" bsDatepicker
                [bsConfig]="bsConfig" formControlName="createdate"
                [formControl]="valForm.controls['createdate']" [minDate]="minDate" />
                <div class="input-group-append">
                  <button class="btn btn-outline-primary" (click)="dp1.show()" [attr.aria-expanded]="dp.isOpen" type="button"><span><i class="far fa-calendar-alt"></i>
                    </span></button>
                </div>
              </div>
           </div>
           <div class="form-group row">
              <label class="col-xl-2 col-form-label">Expiry Date</label>
              <div class="col-xl-10 input-group">
                <input type="text" class="form-control" #dp="bsDatepicker" bsDatepicker
                [bsConfig]="bsConfig" formControlName="expirydate"
                [formControl]="valForm.controls['expirydate']" [minDate]="minDate" />
                <div class="input-group-append">
                  <button class="btn btn-outline-primary" (click)="dp.show()" [attr.aria-expanded]="dp.isOpen" type="button"><span><i class="far fa-calendar-alt"></i>
                    </span></button>
                </div>
              </div>
          </div>
           <div class="form-group row">
                <label class="col-xl-2 col-form-label">Division</label>
                <div class="col-xl-10">
                  <select class="form-control" formControlName="division" [formControl]="valForm.controls['division']" [ngClass]="{ 'is-invalid': valForm.controls['division'].hasError('required') }">
                    <option value="">Please select</option>
                    <option value="SUPPORT">BUSINESS SUPPORT</option>
                    <option value="REMEDIAL">REMEDIAL CREDIT</option>
                    <option value="CREDITCARD">CREDITCARD</option>
                    <option value="BRANCH">BRANCH</option>
                    <option value="INTERNAL AUDIT">INTERNAL AUDIT</option>
                    <option value="TRANSFORMATION">TRANSFORMATION</option>
                  </select>
                  <span class="text-danger"
                    *ngIf="valForm.controls['division'].hasError('required') && (valForm.controls['division'].dirty || valForm.controls['division'].touched)">division
                    is required</span>
                </div>
            </div>
            <div class="form-group row">
              <label class="col-xl-2 col-form-label">Branch Name</label>
              <div class="col-xl-10">
                <select class="form-control" formControlName="branch" [formControl]="valForm.controls['branch']">
                  <option value="">Please select</option>
                  <option *ngFor="let b of branches" [value]="b?.branchcode">{{b?.branchname}}</option>
                </select>
                <span class="text-danger"
                  *ngIf="valForm.controls['branch'].hasError('required') && (valForm.controls['branch'].dirty || valForm.controls['branch'].touched)">branch
                  is required</span>
              </div>
           </div>
           <div class="form-group row">
                <label class="col-xl-2 col-form-label">Manager</label>
                <div class="col-xl-10">
                  <input class="form-control" type="text" formControlName="manager"
                  [formControl]="valForm.controls['manager']" />
                </div>
            </div>
            <div class="form-group row">
              <label class="col-xl-2 col-form-label">Team</label>
              <div class="col-xl-10">
                <select class="form-control" formControlName="team" [formControl]="valForm.controls['team']" [ngClass]="{ 'is-invalid': valForm.controls['team'].hasError('required') }">
                  <option value="">Please select</option>
                  <option value="CO-OPERATIVES">CO-OPERATIVES</option>
                  <option value="REMEDIAL CREDIT">REMEDIAL CREDIT</option>
                  <option value="CREDITCARDS">CREDITCARDS</option>
                  <option value="CARDCENTER">CARDCENTER</option>
                  <option value="BRANCH">BRANCH</option>
                  <option value="CIBD">CIBD</option>
                  <option value="OTHER">OTHER</option>
                </select>
                <span class="text-danger" *ngIf="valForm.controls['team'].hasError('required') && (valForm.controls['team'].dirty || valForm.controls['team'].touched)">Team
                  is required</span>
              </div>
           </div>
            
            <fieldset class="b0">
              <div class="form-group row">
                <label class="col-md-2 col-form-label">Active</label>
                <div class="col-md-10">
                  <div class="ml-auto">
                    <label class="switch switch-lg m-0">
                      <input type="checkbox" checked="checked" formControlName="active"
                        [formControl]="valForm.controls['active']" />
                      <span></span>
                    </label>
                  </div>
                </div>
              </div>
            </fieldset>

            <fieldset class="b0">
              <div class="form-group row">
                <label class="col-md-2 col-form-label">Roles</label>
                <div class="col-md-10">
                  <div class="c-radio">
                    <label>
                      <input type="radio" name="role" value="admin" formControlName="role"
                        [formControl]="valForm.controls['role']" />
                      <span class="fa fa-circle"></span>Administrator</label>
                  </div>
                  <div class="c-radio">
                    <label>
                      <input type="radio" name="role" value="internalaudit" checked="" formControlName="role"
                        [formControl]="valForm.controls['role']" />
                      <span class="fa fa-circle"></span>Internal Audit</label>
                  </div>
                  <div class="c-radio">
                    <label>
                      <input type="radio" name="role" value="Transformation" checked="" formControlName="role"
                        [formControl]="valForm.controls['role']" />
                      <span class="fa fa-circle"></span>Transformation</label>
                  </div>
                  <div class="c-radio">
                    <label>
                      <input type="radio" name="role" value="teamleader" formControlName="role"
                        [formControl]="valForm.controls['role']" />
                      <span class="fa fa-circle"></span>Team Leader</label>
                  </div>
                  <div class="c-radio">
                    <label>
                      <input type="radio" name="role" value="remedial" formControlName="role"
                        [formControl]="valForm.controls['role']" />
                      <span class="fa fa-circle"></span>Remedial User</label>
                  </div>
                  <div class="c-radio">
                    <label>
                      <input type="radio" name="role" value="remedialadmin" formControlName="role"
                        [formControl]="valForm.controls['role']" />
                      <span class="fa fa-circle"></span>Remedial Admin</label>
                  </div>
                  <div class="c-radio">
                    <label>
                      <input type="radio" name="role" value="branchuser" formControlName="role"
                        [formControl]="valForm.controls['role']" />
                      <span class="fa fa-circle"></span>Branch User</label>
                  </div>
                  <div class="c-radio">
                    <label>
                      <input type="radio" name="role" value="branchmanager" formControlName="role"
                        [formControl]="valForm.controls['role']" />
                      <span class="fa fa-circle"></span>Branch Manager</label>
                  </div>
                  <div class="c-radio">
                    <label>
                      <input type="radio" name="role" value="creditcards" formControlName="role"
                        [formControl]="valForm.controls['role']" />
                      <span class="fa fa-circle"></span>Credit Cards</label>
                  </div>
                </div>
              </div>
            </fieldset>
          </div>
        </div>
        <!-- Buttons -->
        <fieldset>
          <div class="d-flex justify-content-center">
            <!--<button class="btn btn-warning" type="button">Cancel</button>-->
            <button class="btn btn-large btn-outline-inverse" type="submit"  [disabled]="!valForm.valid" *ngIf="buttonTitle" >Update User</button>
            <button class="btn btn-large btn-outline-inverse" type="button"  [disabled]="!valForm.valid" *ngIf="!buttonTitle" (click)="CreateUserfnc($event, valForm.value)">Create User</button>
          </div>
        </fieldset>
      </form>
    </div>
  </div>
</div>